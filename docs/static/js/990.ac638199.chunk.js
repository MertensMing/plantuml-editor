"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[990],{5990:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var r=t(4165),a=t(5861),o=t(4942),i=t(9439),s=t(7027),c=t(8210),l=t(7128),d=t(5303),u=t(6897),p=t(7309),h=t(2791),f=t(7657),m=t(7689),x=t(6250),v=t(5171),w=(0,t(5745).E)((function(e){(0,i.Z)(e,0);var n=(0,m.s0)(),t=(0,v.r)();return{handleInit:function(){t.fetchList()},handleSelectDiagram:function(e){n("/".concat(x.r6.getState().type,"/").concat(e))}}})),j=t(481),g=t(6278),b=t(184),y=function(){return(0,b.jsx)("label",{tabIndex:10,className:"btn btn-ghost btn-circle",children:(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"inline-block w-5 h-5 stroke-current",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"})})})};var k=function(e){var n=w([]),t=n.handleInit,k=n.handleSelectDiagram,Z=(0,m.UO)().id,N=(0,f.oR)(x.r6,(function(e){return e.list})),C=(0,f.oR)(x.r6,(function(e){return e.type})),S=(0,h.useState)(""),A=(0,i.Z)(S,2),I=A[0],R=A[1],L=(0,v.r)();if((0,h.useEffect)((function(){t()}),[]),!N.length)return null;var M=(0,b.jsx)(c.Z,{value:Z,className:"mt-1 pt-px",showArrow:!1,style:{width:300},placeholder:"\u9009\u62e9\u56fe\u8868",dropdownRender:function(n){return(0,b.jsxs)(b.Fragment,{children:[n,(0,b.jsx)(l.Z,{style:{margin:"8px 0"}}),(0,b.jsxs)(d.Z,{style:{padding:"0 8px 4px"},children:[(0,b.jsx)(u.Z,{bordered:!1,onChange:function(e){R(e.target.value)},value:I,placeholder:"\u8bf7\u8f93\u5165\u56fe\u8868\u540d\u79f0"}),(0,b.jsx)(p.ZP,{type:"text",onClick:function(){var n;null===e||void 0===e||null===(n=e.onAdd)||void 0===n||n.call(e,I),R("")},children:"\u65b0\u5efa\u56fe\u8868"})]})]})},bordered:!1,options:N.map((function(e){return{label:(0,b.jsx)("div",{className:"text-gray-500 font-bold text-base cursor-pointer w-64 whitespace-nowrap overflow-ellipsis overflow-hidden text-right hover:text-gray-800",children:e.name}),value:e.id}})),onChange:function(e){k(e)}}),O=(0,b.jsxs)("ul",{tabIndex:10,className:"menu menu-compact dropdown-content mt-3 p-2 shadow bg-base-100 rounded-box w-52",children:[(0,b.jsx)("li",{children:(0,b.jsx)("div",{onClick:function(){var n;return null===e||void 0===e||null===(n=e.onDelete)||void 0===n?void 0:n.call(e)},children:"\u5220\u9664\u56fe\u8868"})}),(0,b.jsx)("li",{children:(0,b.jsx)("div",{onClick:function(){var e=N.reduce((function(e,n){return e[n.id]={id:n.id,name:n.name,diagram:n.diagram},e}),{}),n="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),t=(0,o.Z)({},j.V.deployment,"deployments")[C],r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download","".concat(t,".json")),r.click(),s.default.success("\u5bfc\u51fa\u6210\u529f")},children:"\u5bfc\u51fa\u56fe\u8868"})}),(0,b.jsx)("li",{children:(0,b.jsxs)("label",{htmlFor:"import",children:["\u5bfc\u5165\u56fe\u8868"," ",(0,b.jsx)("input",{id:"import",type:"file",accept:".json",className:"fixed top-0 right-0 ml-96 opacity-0",style:{top:"-10000px"},onChange:function(e){var n=e.target.files[0];if(n.type.includes("json")){var t=new FileReader;t.onload=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.parse(t.result),e.next=3,Promise.all(Object.keys(n).map(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n[t],e.next=3,g.db.deployments.put(a);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 3:s.default.success("\u5bfc\u5165\u6210\u529f"),L.fetchList();case 5:case"end":return e.stop()}}),e)}))),t.readAsText(n)}}})]})})]});return(0,b.jsxs)("div",{className:"flex items-center",children:[M,(0,b.jsxs)("div",{className:"dropdown dropdown-bottom dropdown-end",children:[(0,b.jsx)(y,{}),O]})]})}}}]);
//# sourceMappingURL=990.ac638199.chunk.js.map